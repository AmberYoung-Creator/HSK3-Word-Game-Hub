<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HSK3 Word Game Hub</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Phosphor Icons (Lightweight) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Noto+Sans+SC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #fef3c7; /* Amber-50 */
        }
        .zh-text {
            font-family: 'Noto Sans SC', sans-serif;
        }
        /* Button press animation */
        .btn-press:active {
            transform: scale(0.95);
        }
        /* Loading shimmer */
        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- GEMINI API SETUP ---
        const apiKey = ""; // System will provide this

        const generateWithGemini = async (prompt) => {
            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                         generationConfig: {
                            responseMimeType: "application/json"
                        }
                    })
                });

                if (!response.ok) throw new Error('API Error');
                
                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                return JSON.parse(text);
            } catch (error) {
                console.error("Gemini API Error:", error);
                return null;
            }
        };

        // --- DATA: LINKS CONFIGURATION ---
        const LINKS_DATA = [
            { id: 1, label: "L1 & L2", url: "https://amberyoung-creator.github.io/HSK3-L1-2-Word-Game/" },
            { id: 2, label: "L3 & L4", url: "https://amberyoung-creator.github.io/HSK3-L3-4-Word-Game/" },
            { id: 3, label: "L5 & L6", url: "https://amberyoung-creator.github.io/HSK3-L5-6-Word-Game/" },
            { id: 4, label: "L7 & L8", url: "https://amberyoung-creator.github.io/HSK3-L7-8-Word-Game/" },
            { id: 5, label: "L9 & L10", url: "https://amberyoung-creator.github.io/HSK3-L9-10-Word-Game/" },
            { id: 6, label: "L11 & L12", url: "https://amberyoung-creator.github.io/HSK3-L11-12-Word-Game/" },
            { id: 7, label: "L13 & L14", url: "https://amberyoung-creator.github.io/HSK3-L13-14-Word-Game/" },
            { id: 8, label: "L15 & L16", url: "https://amberyoung-creator.github.io/HSK3-L15-16-Word-Game/" },
            { id: 9, label: "L17 & L18", url: "#" },
            { id: 10, label: "L19 & L20", url: "#" },
        ];

        const CHALLENGE_LINK = "https://amberyoung-creator.github.io/word-scramble-test/";

        // --- COMPONENTS ---

        const Header = () => (
            <header className="bg-white shadow-sm sticky top-0 z-10 px-6 py-4 flex justify-center items-center rounded-b-3xl mb-6">
                <div className="flex flex-col items-center gap-1 text-amber-600">
                    <div className="flex items-center gap-2">
                        <i className="ph-fill ph-game-controller text-3xl"></i>
                        <h1 className="font-extrabold text-2xl tracking-tight">Word Game Hub</h1>
                    </div>
                    <span className="text-xs font-bold bg-amber-100 text-amber-700 px-3 py-1 rounded-full uppercase tracking-wider">
                        HSK 3 Characters & Vocabulary
                    </span>
                </div>
            </header>
        );

        // --- AI FEATURE: SMART QUIZ ---
        const AISmartQuiz = () => {
            const [level, setLevel] = useState("L1-L4");
            const [loading, setLoading] = useState(false);
            const [quizData, setQuizData] = useState(null);
            const [selectedOption, setSelectedOption] = useState(null);
            const [showExplanation, setShowExplanation] = useState(false);

            const generateQuiz = async () => {
                setLoading(true);
                setQuizData(null);
                setSelectedOption(null);
                setShowExplanation(false);

                const prompt = `
                    Generate a single multiple-choice question for a student learning HSK3 Chinese.
                    Target difficulty: ${level}.
                    The question should test vocabulary usage or grammar.
                    Return ONLY this JSON structure:
                    {
                        "question": "The question in Chinese (with _____ for blanks if needed)",
                        "options": ["Option A (Chinese)", "Option B (Chinese)", "Option C (Chinese)", "Option D (Chinese)"],
                        "correctIndex": 0,
                        "explanation": "A short explanation in English why the answer is correct."
                    }
                `;

                const result = await generateWithGemini(prompt);
                if (result) {
                    setQuizData(result);
                }
                setLoading(false);
            };

            const handleOptionClick = (idx) => {
                setSelectedOption(idx);
                setShowExplanation(true);
            };

            return (
                <div className="bg-white rounded-2xl shadow-sm border-2 border-indigo-100 p-5 mt-6 mb-4">
                    <div className="flex items-center justify-between mb-4">
                        <h2 className="text-lg font-bold text-indigo-800 flex items-center gap-2">
                            <i className="ph-fill ph-sparkle text-indigo-500"></i>
                            AI Smart Quiz
                        </h2>
                        <select 
                            value={level} 
                            onChange={(e) => setLevel(e.target.value)}
                            className="text-xs bg-indigo-50 border border-indigo-200 text-indigo-700 rounded-lg px-2 py-1 outline-none font-bold"
                        >
                            <option value="L1-L4">L1 - L4</option>
                            <option value="L5-L10">L5 - L10</option>
                            <option value="L11-L20">L11 - L20</option>
                        </select>
                    </div>

                    {!quizData && !loading && (
                        <div className="text-center py-6">
                            <p className="text-gray-400 text-sm mb-4">Challenge yourself with an AI-generated question!</p>
                            <button 
                                onClick={generateQuiz}
                                className="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-full shadow-md transition-all active:scale-95 flex items-center gap-2 mx-auto"
                            >
                                <i className="ph-bold ph-magic-wand"></i>
                                âœ¨ Generate Quiz
                            </button>
                        </div>
                    )}

                    {loading && (
                        <div className="space-y-3 py-4">
                            <div className="h-6 bg-gray-200 rounded w-3/4 mx-auto shimmer"></div>
                            <div className="h-10 bg-gray-100 rounded-xl shimmer"></div>
                            <div className="h-10 bg-gray-100 rounded-xl shimmer"></div>
                        </div>
                    )}

                    {quizData && (
                        <div className="animate-fade-in">
                            <h3 className="zh-text text-xl font-bold text-gray-800 text-center mb-4">{quizData.question}</h3>
                            <div className="grid grid-cols-1 gap-2 mb-4">
                                {quizData.options.map((opt, idx) => (
                                    <button
                                        key={idx}
                                        onClick={() => handleOptionClick(idx)}
                                        disabled={showExplanation}
                                        className={`zh-text text-left p-3 rounded-xl border-2 transition-all font-medium
                                            ${showExplanation 
                                                ? (idx === quizData.correctIndex ? 'bg-green-100 border-green-500 text-green-800' : (selectedOption === idx ? 'bg-red-50 border-red-300 text-red-800' : 'bg-gray-50 border-gray-100 opacity-50'))
                                                : 'bg-white border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 text-gray-700'
                                            }
                                        `}
                                    >
                                        {opt}
                                    </button>
                                ))}
                            </div>
                            
                            {showExplanation && (
                                <div className="bg-indigo-50 p-3 rounded-xl border border-indigo-100 text-sm">
                                    <p className="font-bold text-indigo-800 mb-1">
                                        {selectedOption === quizData.correctIndex ? "ðŸŽ‰ Correct!" : "ðŸ¤” Keep trying!"}
                                    </p>
                                    <p className="text-indigo-600 leading-snug">{quizData.explanation}</p>
                                    <button 
                                        onClick={generateQuiz}
                                        className="mt-3 w-full py-2 bg-indigo-600 text-white rounded-lg font-bold text-xs uppercase tracking-wider hover:bg-indigo-700"
                                    >
                                        Next Question
                                    </button>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        };

        const LevelButton = ({ label, url, disabled }) => {
            const isPlaceholder = url === "#";
            
            return (
                <a 
                    href={isPlaceholder ? undefined : url} 
                    target={isPlaceholder ? undefined : "_self"}
                    className={`
                        relative flex flex-col items-center justify-center p-6 rounded-2xl shadow-sm border-2 transition-all duration-300 btn-press group
                        ${isPlaceholder 
                            ? 'bg-gray-50 border-gray-200 cursor-not-allowed opacity-60' 
                            : 'bg-white border-amber-100 hover:border-amber-300 hover:shadow-md cursor-pointer'
                        }
                    `}
                    onClick={(e) => isPlaceholder && e.preventDefault()}
                >
                    <div className={`
                        w-12 h-12 rounded-full flex items-center justify-center mb-3 text-xl
                        ${isPlaceholder ? 'bg-gray-200 text-gray-400' : 'bg-amber-100 text-amber-600 group-hover:bg-amber-200'}
                    `}>
                        <i className={`ph-fill ${isPlaceholder ? 'ph-lock-key' : 'ph-play'}`}></i>
                    </div>
                    <span className={`text-lg font-bold ${isPlaceholder ? 'text-gray-400' : 'text-gray-700'}`}>
                        {label}
                    </span>
                    {isPlaceholder && (
                        <span className="absolute bottom-2 text-[10px] font-bold uppercase text-gray-400">Coming Soon</span>
                    )}
                </a>
            );
        };

        const ChallengeButton = ({ url }) => (
            <a 
                href={url}
                className="col-span-2 relative overflow-hidden bg-gradient-to-r from-rose-500 to-orange-500 rounded-2xl shadow-lg p-6 flex items-center justify-between text-white transition-transform hover:scale-[1.02] active:scale-95 group"
            >
                <div className="flex items-center gap-4 z-10">
                    <div className="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
                        <i className="ph-fill ph-trophy text-2xl text-white"></i>
                    </div>
                    <div className="flex flex-col">
                        <span className="text-xl font-bold">Challenging Words</span>
                        <span className="text-white/80 text-sm">Test your mastery!</span>
                    </div>
                </div>
                <i className="ph-bold ph-arrow-right text-2xl opacity-70 group-hover:opacity-100 group-hover:translate-x-1 transition-all z-10"></i>
                
                <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl"></div>
                <div className="absolute bottom-0 left-0 w-24 h-24 bg-black/5 rounded-full -ml-5 -mb-5 blur-xl"></div>
            </a>
        );

        const Footer = () => (
            <footer className="mt-8 text-center text-amber-800/40 text-sm font-semibold pb-8">
                <p>Â© HSK3 Learning Journey with Amber lÇŽoshÄ«</p>
                <p className="text-xs mt-1">Powered by Co âœ¨</p>
            </footer>
        );

        // --- MAIN APP ---
        const App = () => {
            return (
                <div className="min-h-screen flex flex-col max-w-lg mx-auto bg-amber-50">
                    <Header />
                    
                    <main className="flex-grow px-4 pb-6">
                        
                        <div className="grid grid-cols-2 gap-4">
                            {LINKS_DATA.map((link) => (
                                <LevelButton 
                                    key={link.id} 
                                    label={link.label} 
                                    url={link.url} 
                                />
                            ))}

                            {/* Separator Line */}
                            <div className="col-span-2 my-2 flex items-center gap-3">
                                <div className="h-px bg-amber-200 flex-grow"></div>
                                <span className="text-xs font-bold text-amber-400 uppercase tracking-widest">Challenge Mode</span>
                                <div className="h-px bg-amber-200 flex-grow"></div>
                            </div>

                            {/* Full Width Challenge Button */}
                            <ChallengeButton url={CHALLENGE_LINK} />
                        </div>

                        {/* AI Section */}
                        <div className="mt-8 relative">
                            <div className="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-amber-50 px-2 text-xs font-bold text-indigo-400 tracking-widest uppercase">
                                AI Learning Lab
                            </div>
                            <div className="h-px bg-indigo-100 w-full absolute top-0 -z-10"></div>
                            <AISmartQuiz />
                        </div>

                    </main>

                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
